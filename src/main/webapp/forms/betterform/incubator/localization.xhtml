<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xf="http://www.w3.org/2002/xforms"
      xmlns:ev="http://www.w3.org/2001/xml-events"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        >
<head>
    <title>Internationalization &amp; Localization</title>
    <!--
    ~ Copyright (c) 2012. betterFORM Project - http://www.betterform.de
    ~ Licensed under the terms of BSD License
    -->

    <xf:model>
        <xf:instance id="internal" xmlns="">
            <data locale="en">
                <item>10001.1111111</item>
                <item>1.127181727</item>
                <item>1.13799898</item>
                <item>2004-01-06</item>
                <item>2004-01-06</item>
                <item>2004-01-06</item>
                <item>2001-04-02T14:34:03</item>
                <item>2001-04-02T14:34:03</item>
                <item>2001-04-02T14:34:03</item>
                <item>2001-04-02T14:34:03Z</item>
                <item>2001-04-02T14:34:03Z</item>
                <item>2001-04-02T14:34:03Z</item>
                <item>2001-04-02T14:34:03+03:00</item>
                <item>2001-04-02T14:34:03+03:00</item>
                <item>2001-04-02T14:34:03+03:00</item>
            </data>
        </xf:instance>

        <xf:bind nodeset="item[1]" type="decimal"/>
        <xf:bind nodeset="item[2]" type="double"/>
        <xf:bind nodeset="item[3]" type="float"/>

        <xf:bind nodeset="item[4]" type="date"/>
        <xf:bind nodeset="item[5]" type="xf:date"/>
        <xf:bind nodeset="item[6]" type="xsd:date"/>

        <xf:bind nodeset="item[7]" type="dateTime"/>
        <xf:bind nodeset="item[8]" type="xf:dateTime"/>
        <xf:bind nodeset="item[9]" type="xsd:dateTime"/>

        <xf:bind nodeset="item[10]" type="dateTime"/>
        <xf:bind nodeset="item[11]" type="xf:dateTime"/>
        <xf:bind nodeset="item[12]" type="xsd:dateTime"/>

        <xf:bind nodeset="item[13]" type="dateTime"/>
        <xf:bind nodeset="item[14]" type="xf:dateTime"/>
        <xf:bind nodeset="item[15]" type="xsd:dateTime"/>


        <xf:instance id="i-text" xmlns="">
            <data>
                <welcome/>
                <lang/>
                <content1/>
                <decimal/>
                <double/>
                <float/>
                <date/>
                <date/>
                <date/>
                <dateTime/>
                <dateTime/>
                <dateTime/>
                <dateTimeZ/>
                <dateTimeZ/>
                <dateTimeZ/>
                <dateTimeGMT/>
                <dateTimeGMT/>
                <dateTimeGMT/>
                <unbound/>
            </data>
        </xf:instance>
        <xf:instance id="i-empty" xmlns="">
            <data>
                <welcome/>
                <lang/>
                <content1/>
                <decimal/>
                <double/>
                <float/>
                <date/>
                <date/>
                <date/>
                <dateTime/>
                <dateTime/>
                <dateTime/>
                <dateTimeZ/>
                <dateTimeZ/>
                <dateTimeZ/>
                <dateTimeGMT/>
                <dateTimeGMT/>
                <dateTimeGMT/>
                <unbound/>
            </data>
        </xf:instance>
        <xf:instance id="i-text-en" xmlns="">
            <data>
                <welcome>Welcome to the betterForm Localization Demo Page</welcome>
                <lang>Language</lang>
                <content1>This page demonstrates how easy internationalization &amp; localization can by done with betterForm</content1>
                <decimal>Decimal</decimal>
                <double>Double</double>
                <float>Float</float>
                <date>Date</date>
                <date>XForms Date</date>
                <date>Schema Date</date>
                <dateTime>Date / Time</dateTime>
                <dateTime>XForms Date / Time</dateTime>
                <dateTime>Schema Date / Time</dateTime>
                <dateTimeZ>Date / Time (Z)</dateTimeZ>
                <dateTimeZ>XForms Date / Time (Z)</dateTimeZ>
                <dateTimeZ>Schema Date / Time (Z)</dateTimeZ>
                <dateTimeGMT>Date / Time (GMT)</dateTimeGMT>
                <dateTimeGMT>XForms Date / Time (GMT)</dateTimeGMT>
                <dateTimeGMT>Schema Date / Time (GMT)</dateTimeGMT>
                <unbound>Unbound Value</unbound>
            </data>
        </xf:instance>
        <xf:instance id="i-text-de" xmlns="">
            <data>
                <welcome>Willkommen auf der betterForm Localization Demo Seite</welcome>
                <lang>Sprache</lang>
                <content1>Dies Seite demonstriert wie leicht Internationalisierung und Lokalisierung mit betterForm m√∂glich ist</content1>
                <decimal>Dezimal</decimal>
                <double>Double</double>
                <float>Float</float>
                <date>Datum</date>
                <date>XForms Datum</date>
                <date>Schema Datum</date>
                <dateTime>Datum / Zeit</dateTime>
                <dateTime>XForms Datum / Zeit</dateTime>
                <dateTime>Schema Datum / Zeit</dateTime>
                <dateTimeZ>Datum / Zeit (Z)</dateTimeZ>
                <dateTimeZ>XForms Datum / Zeit (Z)</dateTimeZ>
                <dateTimeZ>Schema Datum / Zeit (Z)</dateTimeZ>
                <dateTimeGMT>Datum / Zeit (GMT)</dateTimeGMT>
                <dateTimeGMT>XForms Datum / Zeit (GMT)</dateTimeGMT>
                <dateTimeGMT>Schema Datum / Zeit (GMT)</dateTimeGMT>
                <unbound>Ungebundener Wert</unbound>
            </data>
        </xf:instance>

        <xf:submission id="s-lang_en"
                       action="echo://foo"
                       method="get"
                       replace="instance"
                       instance="i-text"
                       ref="instance('i-text-en')">
            <xf:message level="ephemeral" ev:event="xforms-submit-done">Loading lang en...</xf:message>

            <xf:action ev:event="xforms-submit-done">
                <script type="text/javascript">
                    fluxProcessor.setLocale("en");
                </script>
                <xf:message level="ephemeral" ev:event="xforms-submit-done">Language loaded.</xf:message>
                
            </xf:action>

        </xf:submission>

        <xf:submission id="s-lang_de"
                       action="echo:foo"
                       method="get"
                       replace="instance"
                       instance="i-text"
                       ref="instance('i-text-de')">
            <xf:message level="ephemeral" ev:event="xforms-submit-done">Loading lang de...</xf:message>
            <xf:action ev:event="xforms-submit-done">
                <script type="text/javascript">
                    fluxProcessor.setLocale("de");
                </script>
                <xf:message level="ephemeral" ev:event="xforms-submit-done">Language loaded.</xf:message>
            </xf:action>

        </xf:submission>


        <xf:instance id="new" xmlns="">
            <data locale="en">
                <item>20001.1111111</item>
                <item>3.127181727</item>
                <item>4.13799898</item>
                <item>2004-01-02</item>
                <item>2004-01-02</item>
                <item>2004-01-02</item>
                <item>2007-01-12T03:03:03</item>
                <item>2007-01-12T03:03:03</item>
                <item>2007-01-12T03:03:03</item>
                <item>2007-01-12T03:03:03+03:00Z</item>
                <item>2007-01-12T03:03:03+03:00Z</item>
                <item>2007-01-12T03:03:03+03:00Z</item>
                <item>2007-01-12T03:03:03+03:00+03:00</item>
                <item>2007-01-12T03:03:03+03:00+03:00</item>
                <item>2007-01-12T03:03:03+03:00+03:00</item>
            </data>
        </xf:instance>


        <xf:action ev:event="xforms-ready">
            <xf:send submission="s-lang_en" if="instance('internal')/@locale='en'"/>
            <xf:send submission="s-lang_de" if="instance('internal')/@locale='de'"/>
        </xf:action>
        <xf:submission id="s-debug"
                       method="post"
                       action="{$contextroot}/jsp/debug-instance.jsp"
                       validate="false"/>

        <xf:submission id="s-replace"
                       ref="instance('new')"
                       resource="echo:hallo"
                       method="get"
                       replace="instance"
                       validate="false"
                       instance="internal">
        </xf:submission>
        <xf:submission id="s-replace-empty"
                       ref="instance('i-empty')"
                       resource="echo:hallo"
                       method="get"
                       replace="instance"
                       validate="false"
                       instance="internal">
        </xf:submission>

    </xf:model>
    <style type="text/css">
        tr {
            padding:5px;
            margin:5px;
        }
        td {
            padding:5px;
            margin:5px;            
        }
        .welcomeMsg {
            font-size:large;
            font-weight:bold;
            display:block;
        }
        .header td {
            font-weight:bold;
        }

    </style>

</head>
<body class="tundra">
<xf:group appearance="full">
    <div style="float:left;right:150px;position:absolute;">
<!--
        <xf:select1 id="lang-selector" ref="@locale" appearance="minimal" incremental="true">
            <xf:label ref="instance('i-text')/lang"/>
            <xf:item>
                <xf:label>de</xf:label>
                <xf:value>de</xf:value>
                <xf:action ev:event="xforms-select">
                    <xf:send submission="s-lang_de"/>
                </xf:action>
            </xf:item>
            <xf:item>
                <xf:label>en</xf:label>
                <xf:value>en</xf:value>
                <xf:action ev:event="xforms-select">
                    <xf:send submission="s-lang_en"/>
                </xf:action>
            </xf:item>
        </xf:select1>
-->
    </div>

	<xf:trigger>
		<xf:label>Lang = EN</xf:label>
		<xf:action>
			<script type="text/javascript">
				fluxProcessor.setLocale("en");
			</script>
		</xf:action>

	</xf:trigger>
	<xf:trigger>
		<xf:label>Lang = DE</xf:label>
		<xf:action>
			<script type="text/javascript">
				fluxProcessor.setLocale("de");
			</script>
		</xf:action>

	</xf:trigger>
    <xf:output class="welcomeMsg" ref="instance('i-text')/welcome"/>

    <xf:output class="textMsg" ref="instance('i-text')/content1"/>

    <table>
        <tr class="header">
            <td width="150"></td>
            <td width="250">xforms:output</td>
            <td width="250">xforms:input</td>
        </tr>
        <tr>
            <td><xf:output ref="instance('i-text')/decimal"/></td>
            <td>
                <xf:output ref="item[1]"/>
            </td>
            <td>
                <xf:input ref="item[1]">
                    <xf:label/>
                </xf:input>
            </td>
        </tr>
        <tr>
            <td><xf:output ref="instance('i-text')/double"/></td>
            <td>
                <xf:output ref="item[2]"/>
            </td>
            <td>
                <xf:input ref="item[2]">
                    <xf:label/>
                </xf:input>

            </td>
        </tr>



        <tr>
            <td><xf:output ref="instance('i-text')/float"/></td>
            <td>
                <xf:output ref="item[3]"/>
            </td>
            <td>
                <xf:input ref="item[3]">
                    <xf:label/>
                </xf:input>

            </td>
        </tr>
        <tr>

            <td><xf:output ref="instance('i-text')/date[1]"/></td>
            <td>
                <xf:output ref="item[4]"/>
            </td>
            <td>
                <xf:input ref="item[4]">
                    <xf:label/>
                </xf:input>

            </td>
        </tr>
        <tr>

            <td><xf:output ref="instance('i-text')/date[2]"/></td>
            <td>
                <xf:output ref="item[5]"/>
            </td>
            <td>
                <xf:input ref="item[5]">
                    <xf:label/>
                </xf:input>

            </td>
        </tr>
        <tr>

            <td><xf:output ref="instance('i-text')/date[3]"/></td>
            <td>
                <xf:output ref="item[6]"/>
            </td>
            <td>
                <xf:input ref="item[6]">
                    <xf:label/>
                </xf:input>

            </td>
        </tr>

        <tr>
            <td>
                <xf:output ref="instance('i-text')/dateTime[1]"/>
            </td>
            <td>
                <xf:output ref="item[7]"/>
            </td>
            <td>
                <xf:input ref="item[7]">
                    <xf:label/>
                </xf:input>

            </td>
        </tr>
        <tr>
            <td><xf:output ref="instance('i-text')/dateTime[2]"/></td>
            <td>
                <xf:output ref="item[8]"/>
            </td>
            <td>
                <xf:input ref="item[8]">
                    <xf:label/>
                </xf:input>

            </td>
        </tr>
        <tr>
            <td>
                <xf:output ref="instance('i-text')/dateTime[3]"/>
            </td>
            <td>
                <xf:output ref="item[9]"/>
            </td>
            <td>
                <xf:input ref="item[9]">
                    <xf:label/>
                </xf:input>

            </td>
        </tr>
        <tr>
            <td>
                <xf:output ref="instance('i-text')/dateTimeZ[1]"/>
            </td>
            <td>
                <xf:output ref="item[10]"/>
            </td>
            <td>
                <xf:input ref="item[10]">
                    <xf:label/>
                </xf:input>
            </td>
        </tr>
        <tr>
            <td>
				<xf:output ref="instance('i-text')/dateTimeZ[2]"/>
			</td>
            <td>
                <xf:output ref="item[11]"/>
            </td>
            <td>
                <xf:input ref="item[11]">
                    <xf:label/>
                </xf:input>
            </td>
        </tr>
        <tr>
            <td><xf:output ref="instance('i-text')/dateTimeZ[3]"/></td>
            <td>
                <xf:output ref="item[12]"/>
            </td>
            <td>
                <xf:input ref="item[12]">
                    <xf:label/>
                </xf:input>
            </td>
        </tr>        <tr>
            <td>
                <xf:output ref="instance('i-text')/dateTimeGMT[1]"/>
            </td>
            <td>
                <xf:output ref="item[13]"/>
            </td>
            <td>
                <xf:input ref="item[13]">
                    <xf:label/>
                </xf:input>
            </td>
        </tr>
        <tr>
            <td>
				<xf:output ref="instance('i-text')/dateTimeGMT[2]"/>
			</td>
            <td>
                <xf:output ref="item[14]"/>
            </td>
            <td>
                <xf:input ref="item[14]">
                    <xf:label/>
                </xf:input>
            </td>
        </tr>
        <tr>
            <td><xf:output ref="instance('i-text')/dateTimeGMT[3]"/></td>
            <td>
                <xf:output ref="item[15]"/>
            </td>
            <td>
                <xf:input ref="item[15]">
                    <xf:label/>
                </xf:input>
            </td>
        </tr>
        <tr>
            <td><xf:output ref="instance('i-text')/unbound"/></td>
            <td>
                <xf:output value="number(item[1] * 5)"/>
            </td>
            <td/>
        </tr>

    </table>
    <br/>
    <xf:trigger>
        <xf:label>Show Instance</xf:label>
        <xf:send submission="s-debug"/>
    </xf:trigger>
    <xf:trigger>
        <xf:label>Replace Instance (data)</xf:label>
        <xf:send submission="s-replace"/>
    </xf:trigger>
    <xf:trigger>
        <xf:label>Replace Instance (empty)</xf:label>
        <xf:send submission="s-replace-empty"/>
    </xf:trigger>

</xf:group>
</body>
</html>
